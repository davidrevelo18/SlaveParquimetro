http://os.mbed.com/users/williequesada/code/Queue/#6753b35bf8174f39308008197ff04534edbc7116